@import "tailwindcss";

/* Enable dark mode via class strategy */
@custom-variant dark (&:where(.dark, .dark *));

/* Use absolute paths for Electron compatibility */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/src/fonts/Inter-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url('/src/fonts/Inter-Medium.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('/src/fonts/Inter-SemiBold.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/src/fonts/Inter-Bold.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 800;
  font-display: swap;
  src: url('/src/fonts/Inter-ExtraBold.woff2') format('woff2');
}

@font-face {
  font-family: 'AlibabaHealthFont';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/src/fonts/AlibabaHealthFont20CN-85B.woff2') format('woff2');
}

@font-face {
  font-family: 'DOUYINSANSBOLD';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/src/fonts/DOUYINSANSBOLD-GB-pc-EUC-h.woff2') format('woff2');
}

@font-face {
  font-family: 'Handwrighing';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/src/fonts/handwrighting.woff2') format('woff2');
}

@font-face {
  font-family: 'Fusion Pixel';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/src/fonts/Fusion-Pixel-12px-Proportional-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/src/fonts/JetBrainsMono-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/src/fonts/JetBrainsMono-Bold.woff2') format('woff2');
}

/* Base layout - ensure full height for Electron */
html, body, #root {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

/* Electron window drag region */
.app-drag-region {
  -webkit-app-region: drag;
}

.app-no-drag {
  -webkit-app-region: no-drag;
}

/* Make all interactive elements non-draggable by default */
button, input, select, textarea, a, [role="button"] {
  -webkit-app-region: no-drag;
}

/* Custom scrollbar styles */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgb(var(--bg-main));
}

::-webkit-scrollbar-thumb {
  background: rgb(var(--bg-element));
  border-radius: 4px;
  border: 2px solid rgb(var(--bg-main));
}

::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--primary-500));
}

/* Custom scrollbar classes */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(var(--primary-500) / 0.5);
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--primary-500));
}

.custom-scrollbar-horizontal {
  overflow-x: auto;
  overflow-y: hidden;
}

.custom-scrollbar-horizontal::-webkit-scrollbar {
  height: 4px;
}

.custom-scrollbar-horizontal::-webkit-scrollbar-thumb {
  background: rgba(var(--primary-500) / 0.3);
  border-radius: 2px;
}

.custom-scrollbar-horizontal::-webkit-scrollbar-thumb:hover {
  background: rgba(var(--primary-500) / 0.6);
}

/* Glass panel effect */
.glass-panel {
  background: rgba(var(--bg-panel) / 0.7);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(var(--border-main) / 0.5);
}

/* LaTeX color override to match theme */
.katex {
  color: rgb(var(--text-primary)) !important;
  font-size: 1.1em;
}

.katex-display {
  overflow-x: auto;
  overflow-y: hidden;
  padding: 1rem 0;
}

/* CodeMirror initialization mode - prevents flash during scroll setup */
.codemirror-container.codemirror-initializing .cm-editor {
  opacity: 0;
}

.codemirror-container:not(.codemirror-initializing) .cm-editor {
  opacity: 1;
  transition: opacity 0.15s ease-out;
}

/* Fancy Background for MindMap */
.bg-radial-fade {
  background: radial-gradient(circle at center, transparent 0%, rgb(var(--bg-main)) 100%);
}

/* Theme CSS Variables - Default dark theme */
:root {
  --bg-main: 15 23 42;
  --bg-panel: 30 41 59;
  --bg-element: 51 65 85;
  --border-main: 71 85 105;
  --text-primary: 248 250 252;
  --text-secondary: 148 163 184;
  --primary-500: 6 182 212;
  --primary-600: 8 145 178;
  --secondary-500: 139 92 246;
  --neutral-50: 248 250 252;
  --neutral-100: 241 245 249;
  --neutral-200: 226 232 240;
  --neutral-300: 203 213 225;
  --neutral-400: 148 163 184;
  --neutral-500: 100 116 139;
  --neutral-600: 71 85 105;
  --neutral-700: 51 65 85;
  --neutral-800: 30 41 59;
  --neutral-900: 15 23 42;
  /* Font variables */
  --font-primary: 'Inter', 'Noto Sans SC', sans-serif;
  --font-header: 'Inter', 'Noto Sans SC', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
  /* Font size variables - can be overridden by themes */
  --font-size-base: 1rem;
  --font-size-sm: 0.875rem;
  --font-size-lg: 1.125rem;
  --font-size-h1: 2.25em;
  --font-size-h2: 1.75em;
  --font-size-h3: 1.375em;
  --line-height-base: 1.6;
}

/* Tailwind v4 theme configuration via CSS */
@theme {
  /* Colors using CSS variable-based approach */
  --color-cyber-900: rgb(var(--bg-main));
  --color-cyber-800: rgb(var(--bg-panel));
  --color-cyber-700: rgb(var(--bg-element));
  --color-cyber-500: rgb(var(--primary-500));
  --color-cyber-400: rgb(var(--primary-600));
  --color-cyber-accent: rgb(var(--secondary-500));

  --color-paper-50: rgb(var(--bg-main));
  --color-paper-100: rgb(var(--bg-panel));
  --color-paper-200: rgb(var(--bg-element));
  --color-paper-300: rgb(var(--border-main));
  --color-paper-800: rgb(var(--neutral-800));
  --color-paper-900: rgb(var(--neutral-900));

  --color-slate-50: rgb(var(--neutral-50));
  --color-slate-100: rgb(var(--neutral-100));
  --color-slate-200: rgb(var(--neutral-200));
  --color-slate-300: rgb(var(--neutral-300));
  --color-slate-400: rgb(var(--neutral-400));
  --color-slate-500: rgb(var(--neutral-500));
  --color-slate-600: rgb(var(--neutral-600));
  --color-slate-700: rgb(var(--neutral-700));
  --color-slate-800: rgb(var(--neutral-800));
  --color-slate-900: rgb(var(--neutral-900));

  --color-cyan-300: rgb(var(--primary-500));
  --color-cyan-400: rgb(var(--primary-600));
  --color-cyan-500: rgb(var(--primary-500));
  --color-cyan-600: rgb(var(--primary-600));

  --color-violet-500: rgb(var(--secondary-500));

  /* Font families - use CSS variables for theme switching */
  --font-sans: var(--font-primary);
  --font-mono: var(--font-mono);
}

/* Inter font - loaded locally */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url('./fonts/Inter-Light.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('./fonts/Inter-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url('./fonts/Inter-Medium.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('./fonts/Inter-SemiBold.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('./fonts/Inter-Bold.woff2') format('woff2');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 800;
  font-display: swap;
  src: url('./fonts/Inter-ExtraBold.woff2') format('woff2');
}

/* JetBrains Mono font - loaded locally */
@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('./fonts/JetBrainsMono-Regular.woff2') format('woff2');
}

@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('./fonts/JetBrainsMono-Bold.woff2') format('woff2');
}

/* Prose/Typography styles for markdown */
.prose {
  max-width: none;
  color: rgb(var(--text-secondary));
  font-family: var(--font-primary);
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
}

.prose a {
  color: rgb(var(--primary-500));
  text-decoration: none;
  font-weight: 500;
}

.prose a:hover {
  color: rgb(var(--primary-600));
  text-decoration: underline;
}

.prose h1 {
  color: rgb(var(--primary-500));
  font-family: var(--font-header);
  font-weight: 800;
  font-size: var(--font-size-h1);
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid rgb(var(--primary-500) / 0.3);
  text-shadow: 0 0 20px rgb(var(--primary-500) / 0.3);
}

.prose h2 {
  color: rgb(var(--secondary-500));
  font-family: var(--font-header);
  font-weight: 700;
  font-size: var(--font-size-h2);
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  padding-bottom: 0.25rem;
  border-bottom: 1px solid rgb(var(--secondary-500) / 0.3);
}

.prose h3 {
  color: rgb(var(--text-primary));
  font-family: var(--font-header);
  font-weight: 600;
  font-size: var(--font-size-h3);
  margin-top: 1.25rem;
  margin-bottom: 0.5rem;
}

.prose h4 {
  color: rgb(var(--text-primary));
  font-family: var(--font-header);
  font-weight: 600;
  font-size: 1.125em;
  margin-top: 1rem;
}

.prose code {
  color: rgb(var(--primary-500));
  background-color: rgba(var(--primary-500) / 0.1);
  padding: 2px 4px;
  border-radius: 4px;
  font-weight: 400;
}

.prose code::before,
.prose code::after {
  content: "";
}

.prose pre {
  background-color: rgb(var(--bg-main));
  border: 1px solid rgb(var(--border-main));
  color: rgb(var(--text-secondary));
}

.prose pre code {
  color: inherit;
  background-color: transparent;
  padding: 0;
}

.prose strong {
  color: rgb(var(--text-primary));
}

.prose blockquote {
  border-left: 4px solid rgb(var(--primary-500));
  background-color: rgb(var(--bg-panel));
  color: rgb(var(--text-secondary));
  font-style: normal;
  padding: 1rem 1.5rem;
  margin: 1.5rem 0;
  border-radius: 0 0.5rem 0.5rem 0;
}

.prose blockquote p:first-of-type::before,
.prose blockquote p:last-of-type::after {
  content: "";
}

.prose hr {
  border-color: rgb(var(--border-main));
}

/* Table styles */
.prose table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
  font-size: 0.9em;
}

.prose thead {
  border-bottom: 2px solid rgb(var(--primary-500));
  background: rgb(var(--bg-panel));
}

.prose thead th {
  color: rgb(var(--text-primary));
  font-weight: 600;
  text-align: left;
  padding: 0.75rem 1rem;
}

.prose tbody tr {
  border-bottom: 1px solid rgb(var(--border-main) / 0.5);
  transition: background-color 0.15s;
}

.prose tbody tr:hover {
  background: rgb(var(--bg-panel) / 0.5);
}

.prose tbody td {
  padding: 0.75rem 1rem;
  color: rgb(var(--text-secondary));
}

.prose tbody tr:nth-child(even) {
  background: rgb(var(--bg-panel) / 0.3);
}

/* RAG Results Card Styles */
.rag-results-card {
  animation: slide-in 0.3s ease-out;
}

@keyframes slide-in {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.rag-result-item {
  animation: fade-in 0.2s ease-out backwards;
}

.rag-result-item:nth-child(1) { animation-delay: 0.05s; }
.rag-result-item:nth-child(2) { animation-delay: 0.1s; }
.rag-result-item:nth-child(3) { animation-delay: 0.15s; }
.rag-result-item:nth-child(4) { animation-delay: 0.2s; }
.rag-result-item:nth-child(5) { animation-delay: 0.25s; }

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateX(-4px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* ConfirmDialog animations */
.animate-fade-in {
  animation: dialog-fade-in 0.2s ease-out;
}

.animate-scale-in {
  animation: dialog-scale-in 0.2s ease-out;
}

@keyframes dialog-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes dialog-scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Chat markdown content overflow fix */
.chat-markdown-content {
  word-break: break-word;
  overflow-wrap: anywhere;
  max-width: 100%;
}

.chat-markdown-content pre {
  max-width: 100%;
  overflow-x: auto;
  white-space: pre;
}

.chat-markdown-content code {
  word-break: break-all;
}

/* HTML Form Elements in Prose (when Render HTML is enabled) */
.prose input[type="text"],
.prose input[type="email"],
.prose input[type="password"],
.prose input[type="number"],
.prose input[type="date"],
.prose input[type="search"],
.prose textarea,
.prose select {
  display: inline-block;
  padding: 0.5rem 0.75rem;
  margin: 0.25rem;
  border: 1px solid rgb(var(--border-main));
  border-radius: 0.375rem;
  background-color: rgb(var(--bg-main));
  color: rgb(var(--text-primary));
  font-size: 0.875rem;
  line-height: 1.5;
  transition: border-color 0.15s, box-shadow 0.15s;
}

.prose input[type="text"]:focus,
.prose input[type="email"]:focus,
.prose input[type="password"]:focus,
.prose input[type="number"]:focus,
.prose input[type="date"]:focus,
.prose input[type="search"]:focus,
.prose textarea:focus,
.prose select:focus {
  outline: none;
  border-color: rgb(var(--primary-500));
  box-shadow: 0 0 0 3px rgb(var(--primary-500) / 0.2);
}

.prose input[type="checkbox"],
.prose input[type="radio"] {
  width: 1rem;
  height: 1rem;
  margin-right: 0.5rem;
  accent-color: rgb(var(--primary-500));
  cursor: pointer;
}

.prose input[type="range"] {
  width: 100%;
  max-width: 200px;
  margin: 0.25rem;
  accent-color: rgb(var(--primary-500));
}

.prose input[type="color"] {
  width: 3rem;
  height: 2rem;
  padding: 0.25rem;
  border: 1px solid rgb(var(--border-main));
  border-radius: 0.375rem;
  cursor: pointer;
}

.prose button,
.prose input[type="submit"],
.prose input[type="button"] {
  display: inline-block;
  padding: 0.5rem 1rem;
  margin: 0.25rem;
  background-color: rgb(var(--primary-500));
  color: white;
  border: none;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.15s;
}

.prose button:hover,
.prose input[type="submit"]:hover,
.prose input[type="button"]:hover {
  background-color: rgb(var(--primary-600));
}

.prose label {
  display: inline-block;
  margin-right: 0.5rem;
  color: rgb(var(--text-primary));
  font-weight: 500;
}

.prose fieldset {
  border: 1px solid rgb(var(--border-main));
  border-radius: 0.5rem;
  padding: 1rem;
  margin: 1rem 0;
}

.prose legend {
  padding: 0 0.5rem;
  font-weight: 600;
  color: rgb(var(--text-primary));
}

/* Semantic HTML Elements in Prose */
.prose header,
.prose footer,
.prose nav,
.prose main,
.prose article,
.prose section,
.prose aside {
  display: block;
  margin: 1rem 0;
  padding: 1rem;
  border: 1px dashed rgb(var(--border-main) / 0.5);
  border-radius: 0.5rem;
  background-color: rgb(var(--bg-panel) / 0.3);
}

.prose header::before { content: "header"; }
.prose footer::before { content: "footer"; }
.prose nav::before { content: "nav"; }
.prose main::before { content: "main"; }
.prose article::before { content: "article"; }
.prose section::before { content: "section"; }
.prose aside::before { content: "aside"; }

.prose header::before,
.prose footer::before,
.prose nav::before,
.prose main::before,
.prose article::before,
.prose section::before,
.prose aside::before {
  display: block;
  font-size: 0.65rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: rgb(var(--primary-500) / 0.7);
  margin-bottom: 0.5rem;
  padding-bottom: 0.25rem;
  border-bottom: 1px solid rgb(var(--border-main) / 0.3);
}

/* Details/Summary */
.prose details {
  margin: 1rem 0;
  padding: 0.75rem;
  border: 1px solid rgb(var(--border-main));
  border-radius: 0.5rem;
  background-color: rgb(var(--bg-panel));
}

.prose summary {
  cursor: pointer;
  font-weight: 600;
  color: rgb(var(--text-primary));
  padding: 0.25rem 0;
}

.prose summary:hover {
  color: rgb(var(--primary-500));
}

/* Definition List */
.prose dl {
  margin: 1rem 0;
}

.prose dt {
  font-weight: 600;
  color: rgb(var(--text-primary));
  margin-top: 1rem;
}

.prose dd {
  margin-left: 1.5rem;
  color: rgb(var(--text-secondary));
}

/* Mark/Highlight */
.prose mark {
  background-color: rgb(var(--secondary-500) / 0.3);
  color: inherit;
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
}

/* Abbreviation */
.prose abbr[title] {
  text-decoration: underline dotted;
  cursor: help;
}

/* Keyboard Input */
.prose kbd {
  display: inline-block;
  padding: 0.125rem 0.375rem;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.875em;
  background-color: rgb(var(--bg-panel));
  border: 1px solid rgb(var(--border-main));
  border-radius: 0.25rem;
  box-shadow: 0 1px 0 rgb(var(--border-main));
}

/* Sample Output */
.prose samp {
  font-family: 'JetBrains Mono', monospace;
  background-color: rgb(var(--bg-panel));
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
}

/* Variable */
.prose var {
  font-style: italic;
  color: rgb(var(--primary-500));
}

/* Figure and Figcaption */
.prose figure {
  margin: 1.5rem 0;
  text-align: center;
}

.prose figcaption {
  font-size: 0.875rem;
  color: rgb(var(--text-secondary));
  font-style: italic;
  margin-top: 0.5rem;
}
